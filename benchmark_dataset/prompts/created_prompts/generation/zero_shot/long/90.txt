Your task is to create a C function based on a summary.

**[Target]**
**Based on the summary below, generate the full C function, including the function signature and function body (do not provide any other output)**

**Summary:**
"Sets the gain for a specified DAC (0 or 1) on a high-voltage shield by updating its value in a cached data structure and then calling an update function to write the new configuration to the hardware, returning an error for an invalid DAC index."

**Code:**
```c
static int hvs_set_dac_gain(const struct device* dev, uint8_t dac, enum hv_shield_dac_gains_t gain) {
```